{"ast":null,"code":"import _classCallCheck from\"D:/resources/tarmac/tovuti/productappfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/resources/tarmac/tovuti/productappfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"D:/resources/tarmac/tovuti/productappfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"D:/resources/tarmac/tovuti/productappfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/resources/tarmac/tovuti/productappfrontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import AddProduct from'./AddProduct';import ProductDetails from'./ProductDetails';import http from'./AppConfig';import EditProduct from'./EditProduct';import Dialog from'react-bootstrap-dialog';//declare api-end points to be used in the application\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _=require('lodash');var CATEGORIES_ENDPOINT='/productCategories';var PRODUCTS_ENDPOINT='/products';var SKU_ENDPOINT='/sku';var ATTRIBUTES_ENDPOINT='/productAttributes';//this is the main parent component\nvar Nav=/*#__PURE__*/function(_Component){_inherits(Nav,_Component);var _super=_createSuper(Nav);function Nav(props){var _this;_classCallCheck(this,Nav);_this=_super.call(this,props);//set states\n_this.state={categories:[],products:[],skus:[],attributes:[],selectedCategoryId:null,showEdit:false,showAdd:false,showProductDetails:false,error:null,response:{},productData:{},attributesData:[],isAddProduct:false,isEditProduct:false};//bind functions\n_this.onFormSubmit=_this.onFormSubmit.bind(_assertThisInitialized(_this));_this.onSelectCategory=_this.onSelectCategory.bind(_assertThisInitialized(_this));_this.showAddModal=_this.showAddModal.bind(_assertThisInitialized(_this));_this.showEditModal=_this.showEditModal.bind(_assertThisInitialized(_this));_this.hideModal=_this.hideModal.bind(_assertThisInitialized(_this));_this.editProduct=_this.editProduct.bind(_assertThisInitialized(_this));_this.deleteProductDialog=_this.deleteProductDialog.bind(_assertThisInitialized(_this));_this.productDetails=_this.productDetails.bind(_assertThisInitialized(_this));_this.loadData=_this.loadData.bind(_assertThisInitialized(_this));return _this;}//call backend api to load data\n_createClass(Nav,[{key:\"loadData\",value:function loadData(){var _this2=this;//load categories\nhttp.get(CATEGORIES_ENDPOINT).then(function(response){return response.data;}).then(function(result){_this2.setState({categories:result});},function(error){_this2.setState({error:error});});//load products\nhttp.get(PRODUCTS_ENDPOINT).then(function(response){return response.data;}).then(function(result){_this2.setState({products:result});},function(error){_this2.setState({error:error});});//load SKUs\nhttp.get(SKU_ENDPOINT).then(function(response){return response.data;}).then(function(result){_this2.setState({skus:result});},function(error){_this2.setState({error:error});});//load attributes\nhttp.get(ATTRIBUTES_ENDPOINT).then(function(response){return response.data;}).then(function(result){_this2.setState({attributes:result});},function(error){_this2.setState({error:error});});}},{key:\"componentWillMount\",value:function componentWillMount(){//load data\nthis.loadData();}//handles data on submit for save and edit\n},{key:\"onFormSubmit\",value:function onFormSubmit(data){var _this3=this;var products=this.state.products;//check if submit action is save or edit\nif(this.state.isEditProduct){//edit action\nthis.dialog.show({body:'Edit product?',actions:[Dialog.CancelAction(function(){}),Dialog.OKAction(function(){_this3.setState({isAddProduct:false,isEditProduct:false});http.put('/products/'+data.Id,data).then(function(result){_this3.setState({response:result,isAddProduct:false,isEditProduct:false});});_this3.loadData();})]});}else{//add action\nthis.dialog.show({body:'Add product?',actions:[Dialog.CancelAction(function(){}),Dialog.OKAction(function(){_this3.setState({isAddProduct:false,isEditProduct:false});http.post('/products',data).then(function(result){_this3.setState({response:result,isAddProduct:false,isEditProduct:false});});_this3.loadData();})]});}}},{key:\"editProduct\",value:function editProduct(Id){var _this4=this;//prepopulate edit form\nhttp.get('/productsById/'+Id).then(function(response){return response.data;}).then(function(result){_this4.setState({productData:result});},function(error){_this4.setState({error:error});});}//loads categories on click\n},{key:\"onSelectCategory\",value:function onSelectCategory(Id){this.setState({selectedCategoryId:Id});}//loads add product form\n},{key:\"showAddModal\",value:function showAddModal(){this.setState({showAdd:true,isAddProduct:true});}//loads product edit form\n},{key:\"showEditModal\",value:function showEditModal(Id){this.setState({showEdit:true,isEditProduct:true});this.editProduct(Id);}//loads product details form\n},{key:\"productDetails\",value:function productDetails(Id){var _this5=this;this.setState({showProductDetails:true});//loads attributes\nhttp.get('/attributesData/'+Id).then(function(response){return response.data;}).then(function(result){_this5.setState({attributesData:result});},function(error){_this5.setState({error:error});});this.editProduct(Id);}//deletes product\n},{key:\"deleteProductDialog\",value:function deleteProductDialog(Id){var _this6=this;var products=this.state.products;this.dialog.show({body:'Delete product?',actions:[Dialog.CancelAction(function(){}),Dialog.OKAction(function(){http.delete('/products/'+Id).then(function(result){_this6.setState({response:result,products:products.filter(function(prod){return prod.ProductId!==Id;})});});})]});}//unloads/hides modal component\n},{key:\"hideModal\",value:function hideModal(){this.setState({showAdd:false,showEdit:false,showProductDetails:false});}//render this main component\n},{key:\"render\",value:function render(){var _this7=this;var _this$state=this.state,attributes=_this$state.attributes,skus=_this$state.skus,categories=_this$state.categories,products=_this$state.products,selectedCategoryId=_this$state.selectedCategoryId,showAdd=_this$state.showAdd,showEdit=_this$state.showEdit,productData=_this$state.productData,attributesData=_this$state.attributesData,showProductDetails=_this$state.showProductDetails;//load first category if none is selected\nvar defaultCategory=_.first(categories);//load selected category\nvar selectedCategory=_.find(categories,function(i){return i.Id===selectedCategoryId;})||defaultCategory;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\"}),/*#__PURE__*/_jsx(\"div\",{className:\"topnav\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-3\",children:/*#__PURE__*/_jsx(CategoryFilter,{categories:categories,onSelectCategory:this.onSelectCategory})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-9\",children:[/*#__PURE__*/_jsx(ProductList,{products:products,selectedCategory:selectedCategory,showEditModal:this.showEditModal,deleteProductDialog:this.deleteProductDialog,productDetails:this.productDetails,defaultCategory:defaultCategory}),/*#__PURE__*/_jsx(AddProduct,{showAdd:showAdd,handleClose:this.hideModal,categories:categories,skus:skus,attributes:attributes,products:products,onFormSubmit:this.onFormSubmit}),/*#__PURE__*/_jsx(EditProduct,{showEdit:showEdit,handleClose:this.hideModal,categories:categories,skus:skus,attributes:attributes,products:products,productData:productData,attributesData:attributesData,onFormSubmit:this.onFormSubmit}),/*#__PURE__*/_jsx(ProductDetails,{showProductDetails:showProductDetails,handleClose:this.hideModal,productData:productData,attributesData:attributesData}),/*#__PURE__*/_jsx(Dialog,{ref:function ref(component){_this7.dialog=component;}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm\",onClick:this.showAddModal,children:\"Add Product\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row:after\",children:/*#__PURE__*/_jsx(\"div\",{className:\"footer\"})})]})]});}}]);return Nav;}(Component);/**Category Component */var CategoryFilter=function CategoryFilter(_ref){var categories=_ref.categories,onSelectCategory=_ref.onSelectCategory;var links=categories.map(function(i){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary btn-block\",onClick:function onClick(){return onSelectCategory(i.Id);},children:i.CategoryName}),/*#__PURE__*/_jsx(\"br\",{})]},i.Id);});return/*#__PURE__*/_jsx(\"div\",{children:links});};/*** Product component */var ProductList=function ProductList(_ref2){var products=_ref2.products,selectedCategory=_ref2.selectedCategory,showEditModal=_ref2.showEditModal,deleteProductDialog=_ref2.deleteProductDialog,productDetails=_ref2.productDetails,defaultCategory=_ref2.defaultCategory;var count=1;//filter current products on selection of category\nvar currentProducts=products.filter(function(i){return i.CategoryId===(selectedCategory.Id||defaultCategory.Id);}).map(function(i){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:count++}),/*#__PURE__*/_jsx(\"td\",{children:i.ProductName}),/*#__PURE__*/_jsx(\"td\",{children:i.CategoryName}),/*#__PURE__*/_jsx(\"td\",{children:i.SkuName}),/*#__PURE__*/_jsx(\"td\",{children:i.Price}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info py-0 btn-sm\",onClick:function onClick(){return showEditModal(i.ProductId);},children:\"Edit\"}),\"|\",/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary py-0 btn-sm\",onClick:function onClick(){return productDetails(i.ProductId);},children:\"Details\"}),\"|\",/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger py-0 btn-sm\",onClick:function onClick(){return deleteProductDialog(i.ProductId);},children:\"Delete\"})]})]},i.ProductId);});return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"table\",{className:\"table table-striped table-sm table-success table-bordered\",children:/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{}),/*#__PURE__*/_jsx(\"th\",{children:\"Product Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Category Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"SKU\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{})]}),currentProducts]})})});};export default Nav;","map":{"version":3,"sources":["D:/resources/tarmac/tovuti/productappfrontend/src/apps/Nav.js"],"names":["React","Component","AddProduct","ProductDetails","http","EditProduct","Dialog","_","require","CATEGORIES_ENDPOINT","PRODUCTS_ENDPOINT","SKU_ENDPOINT","ATTRIBUTES_ENDPOINT","Nav","props","state","categories","products","skus","attributes","selectedCategoryId","showEdit","showAdd","showProductDetails","error","response","productData","attributesData","isAddProduct","isEditProduct","onFormSubmit","bind","onSelectCategory","showAddModal","showEditModal","hideModal","editProduct","deleteProductDialog","productDetails","loadData","get","then","data","result","setState","dialog","show","body","actions","CancelAction","OKAction","put","Id","post","delete","filter","prod","ProductId","defaultCategory","first","selectedCategory","find","i","component","CategoryFilter","links","map","CategoryName","ProductList","count","currentProducts","CategoryId","ProductName","SkuName","Price"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport AddProduct from './AddProduct';\r\nimport ProductDetails from './ProductDetails';\r\nimport http from './AppConfig';\r\nimport EditProduct from './EditProduct';\r\nimport Dialog from 'react-bootstrap-dialog';\r\n\r\n//declare api-end points to be used in the application\r\nconst _ = require('lodash');\r\nconst CATEGORIES_ENDPOINT = '/productCategories';\r\nconst PRODUCTS_ENDPOINT = '/products';\r\nconst SKU_ENDPOINT = '/sku';\r\nconst ATTRIBUTES_ENDPOINT = '/productAttributes';\r\n//this is the main parent component\r\nclass Nav extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //set states\r\n    this.state = {\r\n      categories: [],\r\n      products: [],\r\n      skus: [],\r\n      attributes: [],\r\n      selectedCategoryId: null,\r\n      showEdit: false,\r\n      showAdd: false,\r\n      showProductDetails: false,\r\n      error: null,\r\n      response: {},\r\n      productData: {},\r\n      attributesData: [],\r\n      isAddProduct: false,\r\n      isEditProduct: false,\r\n    };\r\n    //bind functions\r\n    this.onFormSubmit = this.onFormSubmit.bind(this);\r\n    this.onSelectCategory = this.onSelectCategory.bind(this);\r\n    this.showAddModal = this.showAddModal.bind(this);\r\n    this.showEditModal = this.showEditModal.bind(this);\r\n    this.hideModal = this.hideModal.bind(this);\r\n    this.editProduct = this.editProduct.bind(this);\r\n    this.deleteProductDialog = this.deleteProductDialog.bind(this);\r\n    this.productDetails = this.productDetails.bind(this);\r\n    this.loadData = this.loadData.bind(this);\r\n  }\r\n  //call backend api to load data\r\n  loadData() {\r\n    //load categories\r\n    http\r\n      .get(CATEGORIES_ENDPOINT)\r\n      .then((response) => response.data)\r\n      .then(\r\n        (result) => {\r\n          this.setState({\r\n            categories: result,\r\n          });\r\n        },\r\n        (error) => {\r\n          this.setState({ error });\r\n        },\r\n      );\r\n    //load products\r\n    http\r\n      .get(PRODUCTS_ENDPOINT)\r\n      .then((response) => response.data)\r\n      .then(\r\n        (result) => {\r\n          this.setState({\r\n            products: result,\r\n          });\r\n        },\r\n        (error) => {\r\n          this.setState({ error });\r\n        },\r\n      );\r\n    //load SKUs\r\n    http\r\n      .get(SKU_ENDPOINT)\r\n      .then((response) => response.data)\r\n      .then(\r\n        (result) => {\r\n          this.setState({\r\n            skus: result,\r\n          });\r\n        },\r\n        (error) => {\r\n          this.setState({ error });\r\n        },\r\n      );\r\n    //load attributes\r\n    http\r\n      .get(ATTRIBUTES_ENDPOINT)\r\n      .then((response) => response.data)\r\n      .then(\r\n        (result) => {\r\n          this.setState({\r\n            attributes: result,\r\n          });\r\n        },\r\n        (error) => {\r\n          this.setState({ error });\r\n        },\r\n      );\r\n  }\r\n  componentWillMount() {\r\n    //load data\r\n    this.loadData();\r\n  }\r\n  //handles data on submit for save and edit\r\n  onFormSubmit(data) {\r\n    const { products } = this.state;\r\n    //check if submit action is save or edit\r\n    if (this.state.isEditProduct) {\r\n      //edit action\r\n      this.dialog.show({\r\n        body: 'Edit product?',\r\n        actions: [\r\n          Dialog.CancelAction(() => {}),\r\n          Dialog.OKAction(() => {\r\n            this.setState({\r\n              isAddProduct: false,\r\n              isEditProduct: false,\r\n            });\r\n\r\n            http.put('/products/' + data.Id, data).then((result) => {\r\n              this.setState({\r\n                response: result,\r\n                isAddProduct: false,\r\n                isEditProduct: false,\r\n              });\r\n            });\r\n            this.loadData();\r\n          }),\r\n        ],\r\n      });\r\n    } else {\r\n      //add action\r\n      this.dialog.show({\r\n        body: 'Add product?',\r\n        actions: [\r\n          Dialog.CancelAction(() => {}),\r\n          Dialog.OKAction(() => {\r\n            this.setState({\r\n              isAddProduct: false,\r\n              isEditProduct: false,\r\n            });\r\n            http.post('/products', data).then((result) => {\r\n              this.setState({\r\n                response: result,\r\n                isAddProduct: false,\r\n                isEditProduct: false,\r\n              });\r\n            });\r\n            this.loadData();\r\n          }),\r\n        ],\r\n      });\r\n    }\r\n  }\r\n\r\n  editProduct(Id) {\r\n    //prepopulate edit form\r\n    http\r\n      .get('/productsById/' + Id)\r\n      .then((response) => response.data)\r\n      .then(\r\n        (result) => {\r\n          this.setState({\r\n            productData: result,\r\n          });\r\n        },\r\n        (error) => {\r\n          this.setState({ error });\r\n        },\r\n      );\r\n  }\r\n  //loads categories on click\r\n  onSelectCategory(Id) {\r\n    this.setState({\r\n      selectedCategoryId: Id,\r\n    });\r\n  }\r\n  //loads add product form\r\n  showAddModal() {\r\n    this.setState({ showAdd: true, isAddProduct: true });\r\n  }\r\n  //loads product edit form\r\n  showEditModal(Id) {\r\n    this.setState({\r\n      showEdit: true,\r\n      isEditProduct: true,\r\n    });\r\n\r\n    this.editProduct(Id);\r\n  }\r\n  //loads product details form\r\n  productDetails(Id) {\r\n    this.setState({\r\n      showProductDetails: true,\r\n    });\r\n    //loads attributes\r\n    http\r\n      .get('/attributesData/' + Id)\r\n      .then((response) => response.data)\r\n      .then(\r\n        (result) => {\r\n          this.setState({\r\n            attributesData: result,\r\n          });\r\n        },\r\n        (error) => {\r\n          this.setState({ error });\r\n        },\r\n      );\r\n    this.editProduct(Id);\r\n  }\r\n  //deletes product\r\n  deleteProductDialog(Id) {\r\n    const { products } = this.state;\r\n    this.dialog.show({\r\n      body: 'Delete product?',\r\n      actions: [\r\n        Dialog.CancelAction(() => {}),\r\n        Dialog.OKAction(() => {\r\n          http.delete('/products/' + Id).then((result) => {\r\n            this.setState({\r\n              response: result,\r\n              products: products.filter((prod) => prod.ProductId !== Id),\r\n            });\r\n          });\r\n        }),\r\n      ],\r\n    });\r\n  }\r\n  //unloads/hides modal component\r\n  hideModal() {\r\n    this.setState({\r\n      showAdd: false,\r\n      showEdit: false,\r\n      showProductDetails: false,\r\n    });\r\n  }\r\n  //render this main component\r\n  render() {\r\n    const {\r\n      attributes,\r\n      skus,\r\n      categories,\r\n      products,\r\n      selectedCategoryId,\r\n      showAdd,\r\n      showEdit,\r\n      productData,\r\n      attributesData,\r\n      showProductDetails,\r\n    } = this.state;\r\n    //load first category if none is selected\r\n    const defaultCategory = _.first(categories);\r\n    //load selected category\r\n    const selectedCategory =\r\n      _.find(categories, (i) => i.Id === selectedCategoryId) || defaultCategory;\r\n    return (\r\n      <div>\r\n        <div className=\"header\"></div>\r\n        <div className=\"topnav\"></div>\r\n        <br />\r\n\r\n        <div className=\"row\">\r\n          <div className=\"col-sm-3\">\r\n            <CategoryFilter\r\n              categories={categories}\r\n              onSelectCategory={this.onSelectCategory}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"col-sm-9\">\r\n            <ProductList\r\n              products={products}\r\n              selectedCategory={selectedCategory}\r\n              showEditModal={this.showEditModal}\r\n              deleteProductDialog={this.deleteProductDialog}\r\n              productDetails={this.productDetails}\r\n              defaultCategory={defaultCategory}\r\n            />\r\n\r\n            <AddProduct\r\n              showAdd={showAdd}\r\n              handleClose={this.hideModal}\r\n              categories={categories}\r\n              skus={skus}\r\n              attributes={attributes}\r\n              products={products}\r\n              onFormSubmit={this.onFormSubmit}\r\n            ></AddProduct>\r\n            <EditProduct\r\n              showEdit={showEdit}\r\n              handleClose={this.hideModal}\r\n              categories={categories}\r\n              skus={skus}\r\n              attributes={attributes}\r\n              products={products}\r\n              productData={productData}\r\n              attributesData={attributesData}\r\n              onFormSubmit={this.onFormSubmit}\r\n            ></EditProduct>\r\n            <ProductDetails\r\n              showProductDetails={showProductDetails}\r\n              handleClose={this.hideModal}\r\n              productData={productData}\r\n              attributesData={attributesData}\r\n            ></ProductDetails>\r\n\r\n            <Dialog\r\n              ref={(component) => {\r\n                this.dialog = component;\r\n              }}\r\n            />\r\n            <button\r\n              className=\"btn btn-primary btn-sm\"\r\n              onClick={this.showAddModal}\r\n            >\r\n              Add Product\r\n            </button>\r\n          </div>\r\n          <div className=\"row:after\">\r\n            <div className=\"footer\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n/**Category Component */\r\nvar CategoryFilter = ({ categories, onSelectCategory }) => {\r\n  const links = categories.map((i) => (\r\n    <div key={i.Id}>\r\n      <button\r\n        className=\"btn btn-secondary btn-block\"\r\n        onClick={() => onSelectCategory(i.Id)}\r\n      >\r\n        {i.CategoryName}\r\n      </button>\r\n      <br />\r\n    </div>\r\n  ));\r\n  return <div>{links}</div>;\r\n};\r\n/*** Product component */\r\nvar ProductList = ({\r\n  products,\r\n  selectedCategory,\r\n  showEditModal,\r\n  deleteProductDialog,\r\n  productDetails,\r\n  defaultCategory,\r\n}) => {\r\n  var count = 1;\r\n  //filter current products on selection of category\r\n  const currentProducts = products\r\n    .filter((i) => i.CategoryId === (selectedCategory.Id || defaultCategory.Id))\r\n    .map((i) => (\r\n      <tr key={i.ProductId}>\r\n        <td>{count++}</td>\r\n        <td>{i.ProductName}</td>\r\n        <td>{i.CategoryName}</td>\r\n        <td>{i.SkuName}</td>\r\n        <td>{i.Price}</td>\r\n\r\n        <td>\r\n          <button\r\n            className=\"btn btn-info py-0 btn-sm\"\r\n            onClick={() => showEditModal(i.ProductId)}\r\n          >\r\n            Edit\r\n          </button>\r\n          |\r\n          <button\r\n            className=\"btn btn-primary py-0 btn-sm\"\r\n            onClick={() => productDetails(i.ProductId)}\r\n          >\r\n            Details\r\n          </button>\r\n          |\r\n          <button\r\n            className=\"btn btn-danger py-0 btn-sm\"\r\n            onClick={() => deleteProductDialog(i.ProductId)}\r\n          >\r\n            Delete\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    ));\r\n  return (\r\n    <div>\r\n      <table className=\"table table-striped table-sm table-success table-bordered\">\r\n        <tbody>\r\n          <tr>\r\n            <th></th>\r\n            <th>Product Name</th>\r\n            <th>Category Name</th>\r\n            <th>SKU</th>\r\n            <th>Price</th>\r\n\r\n            <th></th>\r\n          </tr>\r\n          {currentProducts}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Nav;\r\n"]},"metadata":{},"sourceType":"module"}